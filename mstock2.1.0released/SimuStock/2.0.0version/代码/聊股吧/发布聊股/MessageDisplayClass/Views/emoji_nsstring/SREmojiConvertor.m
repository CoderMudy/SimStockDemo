//
//  SREmojiConvertor.m
//  emoji
//
//  Created by 石瑞 on 6/7/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "SREmojiConvertor.h"

static SREmojiConvertor * _SREmojiConvertor = nil;
@interface SREmojiConvertor () {
  NSArray *_map;
}

@end

@implementation SREmojiConvertor

- (id)init {
  if (self = [super init]) {
    _map = @[@[@"\U0001F601", @"\uE404"],
        @[@"\U0001F602", @"\uE412"],
        @[@"\U0001F603", @"\uE057"],
        @[@"\U0001F604", @"\uE415"],
        @[@"\U0001F609", @"\uE405"],
        @[@"\U0001F60A", @"\uE056"],
        @[@"\U0001F60C", @"\uE40A"],
        @[@"\U0001F60D", @"\uE106"],

        @[@"\U0001F60F", @"\uE402"],
        @[@"\U0001F612", @"\uE40E"],
        @[@"\U0001F613", @"\uE108"],
        @[@"\U0001F614", @"\uE403"],
        @[@"\U0001F616", @"\uE407"],
        @[@"\U0001F618", @"\uE418"],
        @[@"\U0001F61A", @"\uE417"],
        @[@"\U0001F61C", @"\uE105"],
        @[@"\U0001F61D", @"\uE409"],
        @[@"\U0001F61E", @"\uE058"],
        @[@"\U0001F620", @"\uE059"],
        @[@"\U0001F621", @"\uE416"],
        @[@"\U0001F622", @"\uE413"],
        @[@"\U0001F623", @"\uE406"],
        @[@"\U0001F625", @"\uE401"],
        @[@"\U0001F628", @"\uE40B"],
        @[@"\U0001F62A", @"\uE408"],
        @[@"\U0001F62D", @"\uE411"],
        @[@"\U0001F630", @"\uE40F"],
        @[@"\U0001F631", @"\uE107"],
        @[@"\u263A", @"\uE414"],
        @[@"\U0001F632", @"\uE410"],

        @[@"\U0001F633", @"\uE40D"],
        @[@"\U0001F637", @"\uE40C"],
        @[@"\U0001F64C", @"\uE427"],
        @[@"\U0001F64F", @"\uE41D"],
        @[@"\U0001F442", @"\uE41B"],
        @[@"\U0001F443", @"\uE41A"],

        @[@"\U0001F444", @"\uE41C"],
        @[@"\U0001F446", @"\uE22E"],
        @[@"\U0001F447", @"\uE22F"],
        @[@"\U0001F448", @"\uE230"],
        @[@"\U0001F449", @"\uE231"],
        @[@"\U0001F44A", @"\uE00D"],
        @[@"\U0001F44B", @"\uE41E"],

        @[@"\U0001F44C", @"\uE420"],
        @[@"\U0001F44D", @"\uE00E"],
        @[@"\U0001F44E", @"\uE421"],
        @[@"\U0001F44F", @"\uE41F"],
        @[@"\U0001F450", @"\uE422"],
        @[@"\U0001F680", @"\uE10D"],
        @[@"\U0001F683", @"\uE01E"],

        @[@"\U0001F684", @"\uE435"],
        @[@"\U0001F685", @"\uE01F"],
        @[@"\U0001F68C", @"\uE159"],
        @[@"\U0001F68F", @"\uE150"],
        @[@"\U0001F691", @"\uE431"],
        @[@"\U0001F692", @"\uE430"],
        @[@"\U0001F693", @"\uE432"],

        @[@"\U0001F695", @"\uE15A"],
        @[@"\U0001F69A", @"\uE42F"],
        @[@"\U0001F6A4", @"\uE135"],
        @[@"\U0001F6A5", @"\uE14E"],
        @[@"\U0001F6A7", @"\uE137"],
        @[@"\U0001F6AC", @"\uE30E"],
        @[@"\U0001F6AD", @"\uE208"],

        @[@"\U0001F6B2", @"\uE136"],
        @[@"\U0001F6B6", @"\uE201"],
        @[@"\U0001F6B9", @"\uE138"],
        @[@"\U0001F6BA", @"\uE139"],
        @[@"\U0001F6BB", @"\uE151"],
        @[@"\U0001F6BC", @"\uE13A"],
        @[@"\u2600", @"\uE04A"],

        @[@"\u2601", @"\uE049"],
        @[@"\u260E", @"\uE009"],
        @[@"\u2614", @"\uE04B"],
        @[@"\u2615", @"\uE045"],
        @[@"\u261D", @"\uE00F"],

        @[@"\u2660", @"\uE20E"],

        @[@"\u2663", @"\uE20F"],
        @[@"\u2665", @"\uE20C"],
        @[@"\u2666", @"\uE20D"],
        @[@"\u26A0", @"\uE252"],
        @[@"\u26A1", @"\uE13D"],
        @[@"\u26BD", @"\uE018"],
        @[@"\u26BE", @"\uE016"],
        @[@"\u270A", @"\uE010"],
        @[@"\u270B", @"\uE012"],
        @[@"\u270C", @"\uE011"],
        @[@"\u2728", @"\uE32E"],
        @[@"\u2764", @"\uE022"],
        @[@"\u2B55", @"\uE332"],
        @[@"\U0001F303", @"\uE44B"],
        @[@"\U0001F304", @"\uE04D"],
        @[@"\U0001F305", @"\uE449"],
        @[@"\U0001F306", @"\uE146"],

        @[@"\U0001F307", @"\uE44A"],
        @[@"\U0001F308", @"\uE44C"],
        @[@"\U0001F30A", @"\uE43E"],
        @[@"\U0001F319", @"\uE04C"],
        @[@"\U0001F31F", @"\uE335"],
        @[@"\U0001F334", @"\uE307"],
        @[@"\U0001F335", @"\uE308"],
        @[@"\U0001F337", @"\uE304"],
        @[@"\U0001F338", @"\uE030"],
        @[@"\U0001F339", @"\uE032"],
        @[@"\U0001F33A", @"\uE303"],
        @[@"\U0001F33B", @"\uE305"],
        @[@"\U0001F33E", @"\uE444"],
        @[@"\U0001F340", @"\uE110"],
        @[@"\U0001F341", @"\uE118"],
        @[@"\U0001F342", @"\uE119"],
        @[@"\U0001F343", @"\uE447"],
        @[@"\U0001F345", @"\uE349"],
        @[@"\U0001F346", @"\uE34A"],
        @[@"\U0001F349", @"\uE348"],
        @[@"\U0001F34A", @"\uE346"],
        @[@"\U0001F34E", @"\uE345"],
        @[@"\U0001F353", @"\uE347"],
        @[@"\U0001F354", @"\uE120"],
        @[@"\U0001F358", @"\uE33D"],
        @[@"\U0001F359", @"\uE342"],
        @[@"\U0001F35A", @"\uE33E"],
        @[@"\U0001F35B", @"\uE341"],
        @[@"\U0001F35C", @"\uE340"],
        @[@"\U0001F35D", @"\uE33F"],
        @[@"\U0001F35E", @"\uE339"],
        @[@"\U0001F35F", @"\uE33B"],
        @[@"\U0001F361", @"\uE33C"],
        @[@"\U0001F362", @"\uE343"],
        @[@"\U0001F363", @"\uE344"],
        @[@"\U0001F366", @"\uE33A"],
        @[@"\U0001F367", @"\uE43F"],
        @[@"\U0001F370", @"\uE046"],
        @[@"\U0001F371", @"\uE34C"],
        @[@"\U0001F372", @"\uE34D"],
        @[@"\U0001F373", @"\uE147"],
        @[@"\U0001F374", @"\uE043"],
        @[@"\U0001F375", @"\uE338"],
        @[@"\U0001F376", @"\uE30B"],
        @[@"\U0001F378", @"\uE044"],
        @[@"\U0001F37A", @"\uE047"],
        @[@"\U0001F37B", @"\uE30C"],
        @[@"\U0001F380", @"\uE314"],
        @[@"\U0001F381", @"\uE112"],
        @[@"\U0001F382", @"\uE34B"],
        @[@"\U0001F383", @"\uE445"],
        @[@"\U0001F384", @"\uE033"],
        @[@"\U0001F385", @"\uE448"],
        @[@"\U0001F386", @"\uE117"],

        @[@"\U0001F387", @"\uE440"],
        @[@"\U0001F388", @"\uE310"],
        @[@"\U0001F389", @"\uE312"],

        @[@"\U0001F38D", @"\uE436"],
        @[@"\U0001F38E", @"\uE438"],
        @[@"\U0001F38F", @"\uE43B"],

        @[@"\U0001F390", @"\uE442"],
        @[@"\U0001F391", @"\uE446"],
        @[@"\U0001F392", @"\uE43A"],
        @[@"\U0001F393", @"\uE439"],
        @[@"\U0001F3A1", @"\uE124"],
        @[@"\U0001F3A2", @"\uE433"],
        @[@"\U0001F3A4", @"\uE03C"],

        @[@"\U0001F3A5", @"\uE03D"],
        @[@"\U0001F3A6", @"\uE507"],
        @[@"\U0001F3A7", @"\uE30A"],
        @[@"\U0001F3A8", @"\uE502"],
        @[@"\U0001F3A9", @"\uE503"],
        @[@"\U0001F3AB", @"\uE125"],
        @[@"\U0001F3AC", @"\uE324"],

        @[@"\U0001F3AF", @"\uE130"],
        @[@"\U0001F3B0", @"\uE133"],
        @[@"\U0001F3B1", @"\uE42C"],
        @[@"\U0001F3B5", @"\uE03E"],
        @[@"\U0001F3B6", @"\uE326"],
        @[@"\U0001F3B7", @"\uE040"],
        @[@"\U0001F3B8", @"\uE041"],

        @[@"\U0001F3BA", @"\uE042"],
        @[@"\U0001F3BE", @"\uE015"],
        @[@"\U0001F3BF", @"\uE013"],
        @[@"\U0001F3C0", @"\uE42A"],
        @[@"\U0001F3C1", @"\uE132"],
        @[@"\U0001F3C3", @"\uE115"],
        @[@"\U0001F3C4", @"\uE017"],

        @[@"\U0001F3C6", @"\uE131"],
        @[@"\U0001F3C8", @"\uE42B"],
        @[@"\U0001F3CA", @"\uE42D"],
        @[@"\U0001F3E0", @"\uE036"],
        @[@"\U0001F3E7", @"\uE154"],
        @[@"\U0001F3E9", @"\uE501"],
        @[@"\U0001F3ED", @"\uE508"],

        @[@"\U0001F40D", @"\uE52D"],
        @[@"\U0001F40E", @"\uE134"],
        @[@"\U0001F411", @"\uE529"],
        @[@"\U0001F412", @"\uE528"],
        @[@"\U0001F414", @"\uE52E"],
        @[@"\U0001F417", @"\uE52F"],
        @[@"\U0001F418", @"\uE526"],

        @[@"\U0001F419", @"\uE10A"],
        @[@"\U0001F41A", @"\uE441"],
        @[@"\U0001F41B", @"\uE525"],
        @[@"\U0001F420", @"\uE522"],
        @[@"\U0001F424", @"\uE523"],
        @[@"\U0001F427", @"\uE055"],
        @[@"\U0001F428", @"\uE527"],

        @[@"\U0001F42B", @"\uE530"],
        @[@"\U0001F42C", @"\uE520"],
        @[@"\U0001F42D", @"\uE053"],
        @[@"\U0001F42E", @"\uE52B"],
        @[@"\U0001F42F", @"\uE050"],
        @[@"\U0001F430", @"\uE52C"],
        @[@"\U0001F431", @"\uE04F"],

        @[@"\U0001F433", @"\uE054"],
        @[@"\U0001F434", @"\uE01A"],
        @[@"\U0001F435", @"\uE109"],
        @[@"\U0001F436", @"\uE052"],
        @[@"\U0001F437", @"\uE10B"],
        @[@"\U0001F438", @"\uE531"],
        @[@"\U0001F439", @"\uE524"],

        @[@"\U0001F43A", @"\uE52A"],
        @[@"\U0001F43B", @"\uE051"],
        @[@"\U0001F440", @"\uE419"],
        @[@"\U0001F45C", @"\uE323"],
        @[@"\U0001F460", @"\uE13E"],
        @[@"\U0001F461", @"\uE31A"],
        @[@"\U0001F463", @"\uE536"],

        @[@"\U0001F466", @"\uE001"],
        @[@"\U0001F472", @"\uE516"],
        @[@"\U0001F47B", @"\uE11B"],
        @[@"\U0001F47C", @"\uE04E"],
        @[@"\U0001F47D", @"\uE10C"],
        @[@"\U0001F47E", @"\uE12B"],
        @[@"\U0001F47F", @"\uE11A"],

        @[@"\U0001F480", @"\uE11C"],
        @[@"\U0001F485", @"\uE31D"],
        @[@"\U0001F489", @"\uE13B"],
        @[@"\U0001F48A", @"\uE30F"],
        @[@"\U0001F48B", @"\uE003"],
        @[@"\U0001F48D", @"\uE034"],
        @[@"\U0001F48E", @"\uE035"],

        @[@"\U0001F48F", @"\uE111"],
        @[@"\U0001F490", @"\uE306"],
        @[@"\U0001F492", @"\uE43D"],
        @[@"\U0001F494", @"\uE023"],
        @[@"\U0001F497", @"\uE328"],
        @[@"\U0001F498", @"\uE329"],
        @[@"\U0001F499", @"\uE32A"],

        @[@"\U0001F4A2", @"\uE334"],
        @[@"\U0001F4D6", @"\uE148"],
        @[@"\U0001F4DD", @"\uE301"],
        @[@"\U0001F4E1", @"\uE14B"],
        @[@"\U0001F4E2", @"\uE142"],
        @[@"\U0001F4E3", @"\uE317"],
        @[@"\U0001F4E9", @"\uE103"]];

    [_map retain];
  }

  return self;
}

- (NSArray *)emojis4 {
  NSMutableArray *emojis = [NSMutableArray array];
  for (NSArray *item in _map) {
    [emojis addObject:item[1]];
  }

  return emojis;
}

- (NSArray *)emojis5 {
  NSMutableArray *emojis = [NSMutableArray array];
  for (NSArray *item in _map) {
    [emojis addObject:item[0]];
  }

  return emojis;
}

- (NSString *)emoji5To4:(NSString *)text {
  NSString *ios4 = nil, *ios5 = nil;
  for (NSArray *pair in _map) {
    ios5 = pair[0];
    ios4 = pair[1];
    text = [text stringByReplacingOccurrencesOfString:ios5 withString:ios4];
  }

  return text;
}

- (NSString *)emoji4To5:(NSString *)text {
  NSString *ios4 = nil, *ios5 = nil;
  
//  ios4=@"\uE409";
//  ios5=@"\U0001F61D";
//  text = [text stringByReplacingOccurrencesOfString:ios4 withString:ios5];
  for (NSArray *pair in _map) {
    ios5 = pair[0];
    ios4 = pair[1];
    text = [text stringByReplacingOccurrencesOfString:ios4 withString:ios5];
  }

  return text;
}

+(SREmojiConvertor *)sharedManager{
  
  @synchronized( [SREmojiConvertor class] ){
    if(!_SREmojiConvertor)
      _SREmojiConvertor = [[self alloc] init];
    return _SREmojiConvertor;
  }
  
  return nil;
}

- (void)dealloc {
  [_map release];
  _map = nil;

  [super dealloc];
}

@end
